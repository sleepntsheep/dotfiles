<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>st - simple terminal | suckless.org software that sucks less</title>
	<link rel="stylesheet" type="text/css" href="//suckless.org/pub/style.css"/>
</head>

<div id="header">
	<a href="//suckless.org/"><img src="//suckless.org/logo.svg" alt=""/></a>&nbsp;
	<a id="headerLink" href="//suckless.org/">suckless.org</a>
	<span class="hidden"> - </span>
	<span id="headerSubtitle">st - simple terminal</span>
</div>
<hr class="hidden"/>
<div id="menu">
	<a href="//suckless.org/">home</a>
	<a href="//dwm.suckless.org/">dwm</a>
	<a href="//st.suckless.org/"><b>st</b></a>
	<a href="//core.suckless.org/">core</a>
	<a href="//surf.suckless.org/">surf</a>
	<a href="//tools.suckless.org/">tools</a>
	<a href="//libs.suckless.org/">libs</a>
	<a href="//ev.suckless.org/">e.V.</a>
	<span class="right">
		<a href="//dl.suckless.org">download</a>
		<a href="//git.suckless.org">source</a>
	</span>
</div>
<hr class="hidden"/>
<div id="content">
<div id="nav">
	<ul>
	<li><a href="/">about</a></li>
	<li><a href="//st.suckless.org/goals/">goals/</a></li>
	<li><a href="//st.suckless.org/patches/"><b>patches/</b></a>
		<ul>
		<li><a href="//st.suckless.org/patches/alpha/">alpha/</a></li>
		<li><a href="//st.suckless.org/patches/alpha_focus_highlight/">alpha focus highlight/</a></li>
		<li><a href="//st.suckless.org/patches/anygeometry/">anygeometry/</a></li>
		<li><a href="//st.suckless.org/patches/anysize/">anysize/</a></li>
		<li><a href="//st.suckless.org/patches/autocomplete/">autocomplete/</a></li>
		<li><a href="//st.suckless.org/patches/background_image/">background image/</a></li>
		<li><a href="//st.suckless.org/patches/blinking_cursor/">blinking cursor/</a></li>
		<li><a href="//st.suckless.org/patches/bold-is-not-bright/">bold is not bright/</a></li>
		<li><a href="//st.suckless.org/patches/boxdraw/">boxdraw/</a></li>
		<li><a href="//st.suckless.org/patches/charoffsets/">charoffsets/</a></li>
		<li><a href="//st.suckless.org/patches/clipboard/">clipboard/</a></li>
		<li><a href="//st.suckless.org/patches/colors_at_launch/">colors at launch/</a></li>
		<li><a href="//st.suckless.org/patches/colorschemes/">colorschemes/</a></li>
		<li><a href="//st.suckless.org/patches/copyurl/">copyurl/</a></li>
		<li><a href="//st.suckless.org/patches/csi_22_23/">csi 22 23/</a></li>
		<li><a href="//st.suckless.org/patches/cyberpunk-neon/">cyberpunk neon/</a></li>
		<li><a href="//st.suckless.org/patches/cyclefonts/">cyclefonts/</a></li>
		<li><a href="//st.suckless.org/patches/defaultfontsize/">defaultfontsize/</a></li>
		<li><a href="//st.suckless.org/patches/delkey/">delkey/</a></li>
		<li><a href="//st.suckless.org/patches/desktopentry/">desktopentry/</a></li>
		<li><a href="//st.suckless.org/patches/disable_bold_italic_fonts/">disable bold italic fonts/</a></li>
		<li><a href="//st.suckless.org/patches/dracula/">dracula/</a></li>
		<li><a href="//st.suckless.org/patches/dynamic-cursor-color/">dynamic cursor color/</a></li>
		<li><a href="//st.suckless.org/patches/externalpipe/">externalpipe/</a></li>
		<li><a href="//st.suckless.org/patches/externalpipe-signal/">externalpipe signal/</a></li>
		<li><a href="//st.suckless.org/patches/fix_ime/">fix ime/</a></li>
		<li><a href="//st.suckless.org/patches/fix_keyboard_input/"><b>fix keyboard input/</b></a></li>
		<li><a href="//st.suckless.org/patches/font2/">font2/</a></li>
		<li><a href="//st.suckless.org/patches/fullscreen/">fullscreen/</a></li>
		<li><a href="//st.suckless.org/patches/glyph_wide_support/">glyph wide support/</a></li>
		<li><a href="//st.suckless.org/patches/gradient/">gradient/</a></li>
		<li><a href="//st.suckless.org/patches/gruvbox/">gruvbox/</a></li>
		<li><a href="//st.suckless.org/patches/gruvbox-material/">gruvbox material/</a></li>
		<li><a href="//st.suckless.org/patches/hidecursor/">hidecursor/</a></li>
		<li><a href="//st.suckless.org/patches/invert/">invert/</a></li>
		<li><a href="//st.suckless.org/patches/iso14755/">iso14755/</a></li>
		<li><a href="//st.suckless.org/patches/keyboard_select/">keyboard select/</a></li>
		<li><a href="//st.suckless.org/patches/ligatures/">ligatures/</a></li>
		<li><a href="//st.suckless.org/patches/line_snap_delimiter/">line snap delimiter/</a></li>
		<li><a href="//st.suckless.org/patches/moonfly/">moonfly/</a></li>
		<li><a href="//st.suckless.org/patches/nano_shortcuts_support/">nano shortcuts support/</a></li>
		<li><a href="//st.suckless.org/patches/netwmicon/">netwmicon/</a></li>
		<li><a href="//st.suckless.org/patches/newterm/">newterm/</a></li>
		<li><a href="//st.suckless.org/patches/nobadweight/">nobadweight/</a></li>
		<li><a href="//st.suckless.org/patches/nordtheme/">nordtheme/</a></li>
		<li><a href="//st.suckless.org/patches/open_copied_url/">open copied url/</a></li>
		<li><a href="//st.suckless.org/patches/openbsd/">openbsd/</a></li>
		<li><a href="//st.suckless.org/patches/palettes/">palettes/</a></li>
		<li><a href="//st.suckless.org/patches/relativeborder/">relativeborder/</a></li>
		<li><a href="//st.suckless.org/patches/right_click_to_plumb/">right click to plumb/</a></li>
		<li><a href="//st.suckless.org/patches/rightclickpaste/">rightclickpaste/</a></li>
		<li><a href="//st.suckless.org/patches/scrollback/">scrollback/</a></li>
		<li><a href="//st.suckless.org/patches/selectionbg-alpha/">selectionbg alpha/</a></li>
		<li><a href="//st.suckless.org/patches/selectioncolors/">selectioncolors/</a></li>
		<li><a href="//st.suckless.org/patches/solarized/">solarized/</a></li>
		<li><a href="//st.suckless.org/patches/spoiler/">spoiler/</a></li>
		<li><a href="//st.suckless.org/patches/swapmouse/">swapmouse/</a></li>
		<li><a href="//st.suckless.org/patches/sync/">sync/</a></li>
		<li><a href="//st.suckless.org/patches/themed_cursor/">themed cursor/</a></li>
		<li><a href="//st.suckless.org/patches/title_parsing_fix/">title parsing fix/</a></li>
		<li><a href="//st.suckless.org/patches/undercurl/">undercurl/</a></li>
		<li><a href="//st.suckless.org/patches/universcroll/">universcroll/</a></li>
		<li><a href="//st.suckless.org/patches/vertcenter/">vertcenter/</a></li>
		<li><a href="//st.suckless.org/patches/vim_browse/">vim browse/</a></li>
		<li><a href="//st.suckless.org/patches/visualbell/">visualbell/</a></li>
		<li><a href="//st.suckless.org/patches/visualbell2/">visualbell2/</a></li>
		<li><a href="//st.suckless.org/patches/w3m/">w3m/</a></li>
		<li><a href="//st.suckless.org/patches/workingdir/">workingdir/</a></li>
		<li><a href="//st.suckless.org/patches/xclearwin/">xclearwin/</a></li>
		<li><a href="//st.suckless.org/patches/xrandrfontsize/">xrandrfontsize/</a></li>
		<li><a href="//st.suckless.org/patches/xresources/">xresources/</a></li>
		<li><a href="//st.suckless.org/patches/xresources-with-reload-signal/">xresources with reload signal/</a></li>
		<li><a href="//st.suckless.org/patches/xtheme/">xtheme/</a></li>
		</ul>
	</li>
	<li><a href="//st.suckless.org/screenshots/">screenshots/</a></li>
	</ul>
</div>
<hr class="hidden"/>
<div id="main">

<h1>Fix Keyboard Input (Alpha version, use with caution!)</h1>
<h2>Description</h2>
<p>This patch allows cli applications to use all the fancy key combinations that
are available to gui applications. The new scheme for encoding key combinations
was proposed by <a href="http://www.leonerd.org.uk/hacks/fixterms/">Leonard</a> and
appears to have gained traction over the past years.</p>
<h2>Notes</h2>
<p>Very early stage version of this patch - I'm just at the beginning of testing
it in real world settings. I tried to encode as many key combinations as
possible according to the new scheme. This might cause issues with existing
applications if they're not aware of it. Please report any issues that you come
across.</p>
<p>If you use <code>&lt;C-[&gt;</code> for <code>&lt;Esc&gt;</code>, I suggest that you remove the following line
from this patch to re-enable the behavior:</p>
<pre><code>{ XK_bracketleft,  ControlMask,                    &quot;\033[91;5u&quot;,  0,  0},
</code></pre>
<p>If you use <code>&lt;C-6&gt;</code> for changing to the alternative file, I suggest that you
remove the following line from this patch to re-enable the behavior:</p>
<pre><code>{ XK_6,            ControlMask,                    &quot;\033[54;5u&quot;,  0,  0},
</code></pre>
<p>I managed to bind the new mappings to actions in neovim.  If you're using
tmux make sure that it's a recent version, 2.5 works fine for me.  The
easiest way to know that this patch is working properly is to enter vim's
command mode by pressing <code>:</code> followed by pressing <code>&lt;C-v&gt;</code> and the desired key
combination.  This will print the key sequence that vim received.  Here are
some example mappings for vim:</p>
<pre><code>nmap &lt;C-CR&gt; :echo &quot;&lt;C-CR&gt;&quot;&lt;CR&gt;
nmap &lt;C-S-CR&gt; :echo &quot;&lt;C-S-CR&gt;&quot;&lt;CR&gt;
nmap &lt;C-S-M-CR&gt; :echo &quot;&lt;C-S-M-CR&gt;&quot;&lt;CR&gt;
nmap &lt;S-M-CR&gt; :echo &quot;&lt;S-M-CR&gt;&quot;&lt;CR&gt;
nmap &lt;M-CR&gt; :echo &quot;&lt;M-CR&gt;&quot;&lt;CR&gt;
nmap &lt;C-M-CR&gt; :echo &quot;&lt;C-M-CR&gt;&quot;&lt;CR&gt;
nmap &lt;C-Tab&gt; :echo &quot;&lt;C-Tab&gt;&quot;&lt;CR&gt;
nmap &lt;C-S-Tab&gt; :echo &quot;&lt;C-S-Tab&gt;&quot;&lt;CR&gt;
nmap &lt;S-Tab&gt; :echo &quot;&lt;S-Tab&gt;&quot;&lt;CR&gt;
nmap &lt;M-Tab&gt; :echo &quot;&lt;M-Tab&gt;&quot;&lt;CR&gt;
</code></pre>
<p>Leonard suggests to bind the CSI sequence that starts an escape sequence to
<code>0x9b</code> instead of <code>0x1b</code> (Esc) followed by <code>0x5b</code> (left bracket, <code>[</code>). This
removes the double use of the Esc key in terminals. Programs that run in
terminals always have to work around the double use of the Esc key by
introducing a timeout that has to pass before a press of the plain Esc key is
acted upon. For example in vim the timeout is set by the <code>ttimeout</code> and
<code>ttimeoutlen</code> setting. If you want to get rid of the double use and the
timeout, replace all occurrences of <code>\033[</code> with <code>\233</code> in the key definition.
In addition, settings in your CLI programs have to be adjusted to disable the
timeout.</p>
<p>Here is an example.  This entry</p>
<pre><code>{ XK_underscore,   ControlMask,                    &quot;\033[95;5u&quot;,  0,  0},
</code></pre>
<p>becomes the following:</p>
<pre><code>{ XK_underscore,   ControlMask,                    &quot;\23395;5u&quot;,   0,  0},
</code></pre>
<h2>Download</h2>
<ul>
<li><a href="st-fix-keyboard-input-20170603-5a10aca.diff">st-fix-keyboard-input-20170603-5a10aca.diff</a></li>
<li><a href="st-fix-keyboard-input-20170621-b331da5.diff">st-fix-keyboard-input-20170621-b331da5.diff</a></li>
<li><a href="st-fix-keyboard-input-20180605-dc3b5ba.diff">st-fix-keyboard-input-20180605-dc3b5ba.diff</a></li>
</ul>
<h2>Authors</h2>
<ul>
<li>Jan Christoph Ebersbach - <a href="&#x6D;&#x61;i&#x6C;&#x74;&#x6F;:&#106;&#99;&#101;&#98;&#64;&#101;&#45;&#106;&#99;&#46;&#100;&#101;">&#106;&#99;&#101;&#98;&#64;&#101;&#45;&#106;&#99;&#46;&#100;&#101;</a></li>
</ul>
</div>

</div>

</html>
